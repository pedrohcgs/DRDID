<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Locally efficient doubly robust DiD estimators for the ATT — drdid • DRDID</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Locally efficient doubly robust DiD estimators for the ATT — drdid"><meta property="og:description" content='drdid is used to compute the locally efficient doubly robust estimators for the ATT
 in difference-in-differences (DiD) setups. It can be used with panel or stationary repeated cross section data.
 Data should be store in "long" format.'><meta property="og:image" content="https://psantanna.com/DRDID/reference/figures/logo.png"><meta property="og:image:alt" content="Doubly Robust DiD Estimators"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@pedrohcgs"><meta name="twitter:site" content="@pedrohcgs"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DRDID</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.8.902</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fas fa-home fa-la"></span>

  </a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/pedrohcgs/DRDID/" class="external-link">
    <span class="fab fa-github fa-la"></span>

  </a>
</li>
<li>
  <a href="http://twitter.com/pedrohcgs" class="external-link">
    <span class="fab fa-twitter fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Locally efficient doubly robust DiD estimators for the ATT</h1>
    <small class="dont-index">Source: <a href="https://github.com/pedrohcgs/DRDID/blob/master/R/drdid.R" class="external-link"><code>R/drdid.R</code></a></small>
    <div class="hidden name"><code>drdid.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>drdid</code> is used to compute the locally efficient doubly robust estimators for the ATT
 in difference-in-differences (DiD) setups. It can be used with panel or stationary repeated cross section data.
 Data should be store in "long" format.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">drdid</span><span class="op">(</span></span>
<span>  <span class="va">yname</span>,</span>
<span>  <span class="va">tname</span>,</span>
<span>  <span class="va">idname</span>,</span>
<span>  <span class="va">dname</span>,</span>
<span>  xformla <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  panel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  estMethod <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"imp"</span>, <span class="st">"trad"</span><span class="op">)</span>,</span>
<span>  weightsname <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  boot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  boot.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"weighted"</span>, <span class="st">"multiplier"</span><span class="op">)</span>,</span>
<span>  nboot <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  inffunc <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-yname">yname<a class="anchor" aria-label="anchor" href="#arg-yname"></a></dt>
<dd><p>The name of the outcome variable.</p></dd>


<dt id="arg-tname">tname<a class="anchor" aria-label="anchor" href="#arg-tname"></a></dt>
<dd><p>The name of the column containing the time periods.</p></dd>


<dt id="arg-idname">idname<a class="anchor" aria-label="anchor" href="#arg-idname"></a></dt>
<dd><p>The name of the column containing the unit id name.</p></dd>


<dt id="arg-dname">dname<a class="anchor" aria-label="anchor" href="#arg-dname"></a></dt>
<dd><p>The name of the column containing the treatment group (=1 if observation is treated in the post-treatment, =0 otherwise)</p></dd>


<dt id="arg-xformla">xformla<a class="anchor" aria-label="anchor" href="#arg-xformla"></a></dt>
<dd><p>A formula for the covariates to include in the model. It should be of the form <code>~ X1 + X2</code>
(intercept should not be listed as it is always automatically included). Default is NULL which is equivalent to <code>xformla=~1</code>.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The name of the data.frame that contains the data.</p></dd>


<dt id="arg-panel">panel<a class="anchor" aria-label="anchor" href="#arg-panel"></a></dt>
<dd><p>Whether or not the data is a panel dataset. The panel dataset should be provided in long format – that
is, where each row corresponds to a unit observed at a particular point in time.  The default is TRUE.
When <code>panel = FALSE</code>, the data is treated
as stationary repeated cross sections.</p></dd>


<dt id="arg-estmethod">estMethod<a class="anchor" aria-label="anchor" href="#arg-estmethod"></a></dt>
<dd><p>the method to estimate the nuisance parameters.
The default is "imp" which uses weighted least squares to estimate the outcome regressions and
inverse probability tilting to the estimate the the propensity score, leading to the improved locally efficient  DR DiD estimator
proposed by Sant'Anna and Zhao (2020). The other alternative is "trad",
which then uses OLS to estimate outcome regressions and maximum likelihood to estimate propensity score. This leads
to the "traditional" locally efficient DR DiD estimator proposed by Sant'Anna and Zhao (2020).</p></dd>


<dt id="arg-weightsname">weightsname<a class="anchor" aria-label="anchor" href="#arg-weightsname"></a></dt>
<dd><p>The name of the column containing the sampling weights. If NULL, then every observation has the same weights. The weights are normalized and therefore enforced to have mean 1 across all observations.</p></dd>


<dt id="arg-boot">boot<a class="anchor" aria-label="anchor" href="#arg-boot"></a></dt>
<dd><p>Logical argument to whether bootstrap should be used for inference. Default is <code>FALSE</code> and analytical
standard errors are reported.</p></dd>


<dt id="arg-boot-type">boot.type<a class="anchor" aria-label="anchor" href="#arg-boot-type"></a></dt>
<dd><p>Type of bootstrap to be performed (not relevant if <code>boot = FALSE</code>). Options are "weighted" and "multiplier".
If <code>boot = TRUE</code>, default is "weighted".</p></dd>


<dt id="arg-nboot">nboot<a class="anchor" aria-label="anchor" href="#arg-nboot"></a></dt>
<dd><p>Number of bootstrap repetitions (not relevant if boot = <code>FALSE</code>). Default is 999.</p></dd>


<dt id="arg-inffunc">inffunc<a class="anchor" aria-label="anchor" href="#arg-inffunc"></a></dt>
<dd><p>Logical argument to whether influence function should be returned. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list containing the following components:</p>
<dl><dt>ATT</dt>
<dd><p>The DR DiD point estimate</p></dd>

<dt>se</dt>
<dd><p>The DR DiD standard error</p></dd>

<dt>uci</dt>
<dd><p>Estimate of the upper bound of a 95% CI for the ATT</p></dd>

<dt>lci</dt>
<dd><p>Estimate of the lower bound of a 95% CI for the ATT</p></dd>

<dt>boots</dt>
<dd><p>All Bootstrap draws of the ATT, in case bootstrap was used to conduct inference. Default is NULL</p></dd>

<dt>att.inf.func</dt>
<dd><p>Estimate of the influence function. Default is NULL</p></dd>

 <dt>ps.flag</dt>
<dd><p>Convergence Flag for the propensity score estimation
 (only active if <code>estMethod = "imp"</code>.): =0 if <code>trust</code> algorithm converged,
   =1 if IPT (original) algorithm converged (in case it was used), =2 if
   GLM logit estimator was used (i.e., if both <code>trust</code> and IPT
   did not converged).</p></dd>

<dt>call.param</dt>
<dd><p>The matched call.</p></dd>

<dt>argu</dt>
<dd><p>Some arguments used in the call (panel, estMethod, boot, boot.type, nboot, type="dr")</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>When panel data are available (<code>panel = TRUE</code>), the <code>drdid</code> function implements the
locally efficient doubly robust difference-in-differences (DiD) estimator for the average treatment effect
on the treated (ATT) defined in equation (3.1) in Sant'Anna and Zhao (2020). This estimator makes use of
a logistic propensity score model for the probability of being in the treated group,
and of a linear regression model for the outcome evolution among the comparison units.</p>

<p>When only stationary repeated cross-section data are available (<code>panel = FALSE</code>), the <code>drdid</code> function
implements the locally efficient doubly robust difference-in-differences (DiD) estimator for the
average treatment effect on the treated (ATT) defined in equation (3.4) in Sant'Anna and Zhao (2020).
This estimator makes use of a logistic propensity score model for the probability of being in the
treated group, and of (separate) linear regression models for the outcome of both treated and comparison units,
in both pre and post-treatment periods.</p>

<p>When one sets <code>estMethod = "imp"</code> (the default), the nuisance parameters (propensity score and
outcome regression parameters) are estimated using the methods described in Sections 3.1 and 3.2 of
Sant'Anna and Zhao (2020). In short, the propensity score parameters are estimated using the inverse
probability tilting estimator proposed by Graham, Pinto and Pinto (2012), and the outcome
regression coefficients are estimated using weighted least squares,where the weights depend on
the propensity score estimates; see Sant'Anna and Zhao (2020) for details.</p>
<p>When one sets <code>estMethod = "trad"</code>, the propensity score parameters are estimated using maximum
likelihood, and the outcome regression coefficients are estimated using ordinary least squares.</p>
<p>The main advantage of using <code>estMethod = "imp"</code> is that the resulting estimator is not only
locally efficient and doubly robust for the ATT, but it is also doubly robust for inference;
see Sant'Anna and Zhao (2020) for details.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p><cite>Graham, Bryan, Pinto, Cristine, and Egel, Daniel (2012),
"Inverse Probability Tilting for Moment Condition Models with Missing Data."
 Review of Economic Studies, vol. 79 (3), pp. 1053-1079, <a href="https://doi.org/10.1093/restud/rdr047" class="external-link">doi:10.1093/restud/rdr047</a>
</cite></p>

<p><cite>Sant'Anna, Pedro H. C. and Zhao, Jun. (2020),
"Doubly Robust Difference-in-Differences Estimators." Journal of Econometrics, Vol. 219 (1), pp. 101-122,
 <a href="https://doi.org/10.1016/j.jeconom.2020.06.003" class="external-link">doi:10.1016/j.jeconom.2020.06.003</a>
</cite></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># -----------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Panel data case</span></span></span>
<span class="r-in"><span><span class="co"># -----------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Form the Lalonde sample with CPS comparison group</span></span></span>
<span class="r-in"><span><span class="va">eval_lalonde_cps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">nsw_long</span>, <span class="va">nsw_long</span><span class="op">$</span><span class="va">treated</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">|</span> <span class="va">nsw_long</span><span class="op">$</span><span class="va">sample</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Further reduce sample to speed example</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">unit_random</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">eval_lalonde_cps</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>, <span class="fl">5000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">eval_lalonde_cps</span> <span class="op">&lt;-</span> <span class="va">eval_lalonde_cps</span><span class="op">[</span><span class="va">eval_lalonde_cps</span><span class="op">$</span><span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">unit_random</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># -----------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Implement improved DR locally efficient DiD with panel data</span></span></span>
<span class="r-in"><span><span class="fu">drdid</span><span class="op">(</span>yname<span class="op">=</span><span class="st">"re"</span>, tname <span class="op">=</span> <span class="st">"year"</span>, idname <span class="op">=</span> <span class="st">"id"</span>, dname <span class="op">=</span> <span class="st">"experimental"</span>,</span></span>
<span class="r-in"><span>      xformla<span class="op">=</span> <span class="op">~</span> <span class="va">age</span><span class="op">+</span> <span class="va">educ</span><span class="op">+</span> <span class="va">black</span><span class="op">+</span> <span class="va">married</span><span class="op">+</span> <span class="va">nodegree</span><span class="op">+</span> <span class="va">hisp</span><span class="op">+</span> <span class="va">re74</span>,</span></span>
<span class="r-in"><span>      data <span class="op">=</span> <span class="va">eval_lalonde_cps</span>, panel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> drdid(yname = "re", tname = "year", idname = "id", dname = "experimental", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     xformla = ~age + educ + black + married + nodegree + hisp + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         re74, data = eval_lalonde_cps, panel = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Further improved locally efficient DR DID estimator for the ATT:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ATT     Std. Error  t value    Pr(&gt;|t|)  [95% Conf. Interval] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -615.2344   683.2211   -0.9005     0.3679   -1954.3478  723.8791 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Estimator based on panel data.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Outcome regression est. method: weighted least squares.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Propensity score est. method: inverse prob. tilting.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Analytical standard error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  See Sant'Anna and Zhao (2020) for details.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Implement "traditional" DR locally efficient DiD with panel data</span></span></span>
<span class="r-in"><span><span class="fu">drdid</span><span class="op">(</span>yname<span class="op">=</span><span class="st">"re"</span>, tname <span class="op">=</span> <span class="st">"year"</span>, idname <span class="op">=</span> <span class="st">"id"</span>, dname <span class="op">=</span> <span class="st">"experimental"</span>,</span></span>
<span class="r-in"><span>      xformla<span class="op">=</span> <span class="op">~</span> <span class="va">age</span><span class="op">+</span> <span class="va">educ</span><span class="op">+</span> <span class="va">black</span><span class="op">+</span> <span class="va">married</span><span class="op">+</span> <span class="va">nodegree</span><span class="op">+</span> <span class="va">hisp</span><span class="op">+</span> <span class="va">re74</span>,</span></span>
<span class="r-in"><span>      data <span class="op">=</span> <span class="va">eval_lalonde_cps</span>, panel <span class="op">=</span> <span class="cn">TRUE</span>, estMethod <span class="op">=</span> <span class="st">"trad"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> drdid(yname = "re", tname = "year", idname = "id", dname = "experimental", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     xformla = ~age + educ + black + married + nodegree + hisp + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         re74, data = eval_lalonde_cps, panel = TRUE, estMethod = "trad")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Locally efficient DR DID estimator for the ATT:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ATT     Std. Error  t value    Pr(&gt;|t|)  [95% Conf. Interval] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -507.6113   692.9738   -0.7325     0.4639   -1865.8399  850.6173 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Estimator based on panel data.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Outcome regression est. method: OLS.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Propensity score est. method: maximum likelihood.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Analytical standard error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  See Sant'Anna and Zhao (2020) for details.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># -----------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Repeated cross section case</span></span></span>
<span class="r-in"><span><span class="co"># -----------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># use the simulated data provided in the package</span></span></span>
<span class="r-in"><span><span class="co">#Implement "improved" DR locally efficient DiD with repeated cross-section data</span></span></span>
<span class="r-in"><span><span class="fu">drdid</span><span class="op">(</span>yname<span class="op">=</span><span class="st">"y"</span>, tname <span class="op">=</span> <span class="st">"post"</span>, idname <span class="op">=</span> <span class="st">"id"</span>, dname <span class="op">=</span> <span class="st">"d"</span>,</span></span>
<span class="r-in"><span>      xformla<span class="op">=</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x3</span> <span class="op">+</span> <span class="va">x4</span>,</span></span>
<span class="r-in"><span>      data <span class="op">=</span> <span class="va">sim_rc</span>, panel <span class="op">=</span> <span class="cn">FALSE</span>, estMethod <span class="op">=</span> <span class="st">"imp"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> drdid(yname = "y", tname = "post", idname = "id", dname = "d", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     xformla = ~x1 + x2 + x3 + x4, data = sim_rc, panel = FALSE, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     estMethod = "imp")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Further improved locally efficient DR DID estimator for the ATT:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ATT     Std. Error  t value    Pr(&gt;|t|)  [95% Conf. Interval] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  -0.2089     0.2003    -1.0425     0.2972    -0.6015     0.1838  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Estimator based on (stationary) repeated cross-sections data.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Outcome regression est. method: weighted least squares.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Propensity score est. method: inverse prob. tilting.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Analytical standard error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  See Sant'Anna and Zhao (2020) for details.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Implement "traditional" DR locally efficient DiD with repeated cross-section data</span></span></span>
<span class="r-in"><span><span class="fu">drdid</span><span class="op">(</span>yname<span class="op">=</span><span class="st">"y"</span>, tname <span class="op">=</span> <span class="st">"post"</span>, idname <span class="op">=</span> <span class="st">"id"</span>, dname <span class="op">=</span> <span class="st">"d"</span>,</span></span>
<span class="r-in"><span>      xformla<span class="op">=</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x3</span> <span class="op">+</span> <span class="va">x4</span>,</span></span>
<span class="r-in"><span>      data <span class="op">=</span> <span class="va">sim_rc</span>, panel <span class="op">=</span> <span class="cn">FALSE</span>, estMethod <span class="op">=</span> <span class="st">"trad"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> drdid(yname = "y", tname = "post", idname = "id", dname = "d", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     xformla = ~x1 + x2 + x3 + x4, data = sim_rc, panel = FALSE, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     estMethod = "trad")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Locally efficient DR DID estimator for the ATT:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ATT     Std. Error  t value    Pr(&gt;|t|)  [95% Conf. Interval] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  -0.1678     0.2009    -0.8352     0.4036    -0.5616     0.226   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Estimator based on (stationary) repeated cross-sections data.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Outcome regression est. method: OLS.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Propensity score est. method: maximum likelihood.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Analytical standard error.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  See Sant'Anna and Zhao (2020) for details.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://psantanna.com" class="external-link">Pedro H. C. Sant’Anna</a>, Jun Zhao.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

